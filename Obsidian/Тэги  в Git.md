25.04.2023    13:36
Теги: #Git 
---
# ***Внутренние ссылки:***

---
# ***Внешние ссылки:***

---
# ***Заметка:***

# **Кое-что про тегирование в Git

Идеального сценария – "один коммит – одна версия" – никогда не будет на проекте). Наша ветка main не будет такой:

![[Pasted image 20230425133646.png]]

а будет вот такой, с кучей коммитов (изменений) между "нормальными" версиями (важными коммитами):

![[Pasted image 20230425133654.png]]

Будут коммиты важные – те, которые мы хотим добавить в главный код проекта, и неважные – те, которые просто говорят, что эти коммиты делали, это не обязательно должна быть какая-то готовая версия, может быть просто обновление или какое-то улучшение кода. Чтобы указать, какой коммит/какая версия важны, используются теги (tags – с англ. – "закладка"). С их помощью можно легко вернуться на любую версию, чтобы не искать ее в логе репозитория.

Для того, чтобы указать тег, надо зайти в локальный репозиторий:

`cd имя_репозитория`

`git branch`

`git log --pretty=online` (смотрим лог, где все не очень понятно, т.к. много версий)

`ll` (смотрим, что там за файлы в этом репозитории)

Хотим добавить 2 файла:

`touch file1.txt file2.txt` (данная команда создает файлы – их указываем через пробел)

Делаем им `git add`, `git status`, `git commit` и `git push`. Видим, что все хорошо, нам нравится, хотим сделать это первой версией:

`git tag v1.0.0`  – наша версия будет называться v1.0.0, если не назовем ее никак, то гит ничего нам не вернет.

Теперь запустим git tag, который покажет существующие версии:

`git tag`

Видим, что закладка произошла в текущий коммит, поэтому когда мы зайдем в лог:

`git log --pretty=online`

то увидим наш коммит в качестве начального. Если бы мы сделали tag после пуша, то на гитхабе тэга не будет, надо сделать push и ему тоже:

`git push origin v1.0.0`

Зайдя на гитхаб, мы увидим, что он теперь и там тоже. Нажав на него, мы откроем первую версию.

Чтобы стереть тэг на локальной ветке:

`git tag -d v1.0.0`

Чтобы стереть тэг с гитхаба:

`git push origin --delete v1.0.0`

Хорошо, теперь сделаем закладку на следующую важную версию:

`git checkout main` (tag ставим всегда на main версии)

`git pull` (стягиваем себе то, что было смержено)

`git branch` (проверяем, что находимся на main)

`git branch -D имя_ветки` (удаляем ее в main)

`git tag v1.2.0` (тэгируем новую версию)

`git tag` (проверяем, что она есть)

`git push origin v1.2.0` (пушим в гитхаб)

Все. Теперь, если в нашем коде мы хотим перейти на первую версию, то нам уже не надо больше искать коммиты, надо просто смотреть, где есть тэги. Посмотрим теперь, сколько всего файлов:

`ll`

`git log --pretty=online` (смотрим в логе наш тэг v1.0.0)

`git checkout v1.0.0` (переходим на наш коммит v1.0.0)

`ll` (смотрим, как выглядела 1-я версия)

`git branch` (проверим, на какой ветке находимся)

`git checkout main` (переходим на main, если были не на ней)

Натэгировать коммиты можно еще одним способом:

git tag -a v1.3.0 40-значный_SSH_коммита

Запушить все эти протэгированные коммиты можно сразу одним махом на гитхаб:

`git push origin --tags`