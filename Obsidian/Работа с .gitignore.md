20.04.2023    16:20
Теги: #Git #Программирование 
---
# ***Внутренние ссылки:***

---
# ***Внешние ссылки:***

---
# ***Заметка:***

##  Зачем и как мы добавляем файл в .gitignore

На любом проекте в рабочей директории всегда есть файлы и папки, которые мы не только не хотим автоматически добавлять в репозиторий, но и видеть в списках неотслеживаемых. Обычно к таковым относятся автоматически генерируемые файлы: различные логи, результаты сборки программ и т.п., которые постоянно изменяются. Если добавлять их в репозиторий, то в коммите будут не только изменения исходного кода, но и изменения в этих файлах в придачу, и читать историю таких коммитов будет трудновато.

Поэтому в Git можно с помощью текстового редактора создать специальный игнорируемый файл `.gitignore`. В нем мы вручную перечислим шаблоны, соответствующие таким файлам, а также файлы, которые по какой-либо иной причине не должны попадать в коммиты. Этот файл Git помечает для себя как файл, который необходимо игнорировать.

Хорошей практикой считается настройка файла `.gitignore` до того, как начать серьезно работать, — это защитит от случайного добавления в репозиторий файлов, которых мы там видеть не хотим.

Так выглядит файл `.gitignore`:

![](https://ucarecdn.com/97e6ca55-b128-4fa0-8298-b47aa740fab6/)

В первой строке гиту приказано игнорировать все файлы, которые заканчиваются на .rbc, в четвертой — игнорировать директорию log, в шестой — все файлы конфигураций баз данных sqlite3 и т.д.

Для большинства правил используются определенные шаблоны, например, если мы хотим ограничиться только корневым уровнем в репозитории — необходимо явно это указать поставив “/” перед шаблоном.

## Шаблоны

К шаблонам в файле `.gitignore` применяются следующие правила:

- пустые строки, а также строки, начинающиеся с #, игнорируются

- можно использовать стандартные glob шаблоны

- можно заканчивать шаблон символом слэша (/) для указания каталога

- можно инвертировать шаблон, использовав восклицательный знак (!) в качестве первого символа.

Каждый игнорируемый файл указывается в отдельной строке. Git будет полностью игнорировать эти файлы, поместив пути к ним в [`.gitignore`](https://www.atlassian.com/git/tutorials/gitignore).

## Практическая задача с .gitignore

Создадим несколько файлов и папку logs (для создания папки нужна команда `mkdir имя_папки`), посмотрим их с помощью команды `ll` и проверим статус:

!![[Pasted image 20230420162958.png]]

Да, точно, файлы и папка logs есть. Понимаем, что папка logs и файлы zzz.log и aaa.txt не должны попасть в коммит. Создаем здесь же файл `.gitignore`:

![](https://ucarecdn.com/88fb4969-ccb4-47fe-8d89-82ba68424f7a/)

Этой командой мы создаем файл .gitignore и одновременно открываем текстовый редактор nano, в котором вручную пропишем файлы, которые должны быть проигнорированы:

![[Pasted image 20230420163009.png]]

Одна звездочка — это подстановочный знак, который может соответствовать как нескольким символам, так и ни одному, главное, что файлы с такими расширениями — .log и .txt — теперь будут игнорироваться гитом. Косая черта в конце шаблона означает каталог, т.е. наша папка logs тоже будет игнорироваться.

Теперь если мы посмотрим статус, то увидим, что все файлы, попадающие под игнорирование, не отобразятся в выводе команды `git status`: у нас есть `.gitignore` и еще файлы, которые нужно добавить в репозиторий. Папки и файлов с расширениями .log и .txt уже нет:

![[Pasted image 20230420163024.png]]

Проиндексируем их и увидим, что эти файлы стали зелеными. Файл `.gitignore` надо добавить в репозиторий, поэтому закоммичиваем наши файлы. Теперь если мы создадим какой-нибудь файл с расширением .log, которое мы "заигнорили", Git его не видит.

Еще раз: как только мы создали файл _.gitignore_ и добавили в него любой файл или папку, игнорирование заработает автоматически. Команд git status не отображает то, что заигнорено. 

Что делать, если мы случайно уже добавили в репозиторий файл, который нужно проигнорировать? Во-первых, обновляем правила игнорирования в редакторе nano, во-вторых, удаляем файл или папку из Git с помощью `git rm` и в-третьих, закоммитим.

Команда `git rm` удаляет отдельные файлы или группы файлов из репозитория Git, ее действие противоположно действию команды `git add`.

Попробуйте самостоятельно проделать следующие шаги:

1) Добавьте файл _.gitignore_ в проект

2) Создайте файл bbb.html и добавьте его в список игнорируемых файлов, для чего зайдите в nano и немного поколдуйте

3) Выйдите из nano и убедитесь в том, что `git status`  не отображает bbb.html

## О glob-шаблонах кратко:

Они представляют собой упрощенные регулярные выражения, используемые командными интерпретаторами:

- символ `*` соответствует 0 или более символам;

- последовательность `[abc]` — любому символу из указанных в скобках (в данном примере a, b или c);

- знак вопроса `?` соответствует одному символу;

- квадратные скобки, в которые заключены символы через дефис `[0-9]`, соответствуют любому символу из интервала (в данном случае от 0 до 9).

Также можно использовать две звездочки, чтобы указать на вложенные каталоги: `a/**/z` соответствует `a/z`, `a/b/z`, `a/b/c/z`, и так далее.