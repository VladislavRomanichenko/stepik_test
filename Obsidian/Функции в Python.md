27.04.2023    15:40
Теги: #Python #Программирование 
---
# ***Внутренние ссылки:***
[[Локальные и Глобальные переменные]]
---
# ***Внешние ссылки:***

---
# ***Заметка:***

# Функции

Для создания функции пишем такой код:

```python
def draw_box():
    for _ in range(5):
        print('*' * 7)
```

Когда функция создана, чтобы увидеть результат ее работы, надо вызвать ее по имени:

```python
draw_box()
```

## Преимущества использования функций

Разбивая программы на функции получаем:

-   **Более простой код.** Разбитый на функции код программы проще и легче для понимания.  Несколько небольших функций намного легче читать, чем одну длинную последовательность инструкций;
-   **Повторное использование кода.** Функции позволяют избежать многократного повторения кода в программе. Если какая-то операция в программе выполняется в нескольких местах, то можно один раз написать для нее функцию и затем исполнять ее, когда понадобится.
-   **Более простое тестирование.**  Когда каждая задача в программе содержится в собственной функции, программисты могут индивидуально протестировать каждую функцию и определить, выполняет ли она свою задачу правильно.
-   **Более быстрая разработка.** Предположим, что программист или команда программистов разрабатывает много программ. Они обнаруживают общие задачи у разных программ, например выяснение имени пользователя и пароля, вывод текущего времени. Каждый раз писать программный код для этих задач не имеет смысла. Для часто встречающихся задач пишут функции, и включают в состав любой нуждающейся в них программы.
-   **Упрощение командной работы.** Когда программа разрабатывается как набор функций, разным программистам можно поручить написание отдельных функций.

## Что выделять в функции?

В функцию можно выделить любой законченный фрагмент программы. Можно ориентироваться на рекомендации:

-   Когда несколько раз пишете в программе одну и ту же последовательность команд, необходимость введения функции приобретает характер острой внутренней потребности;
-   Иногда обилие мелочей заслоняет главное и полезно убрать в функцию подробности, скрывающие смысл основной программы;
-   Полезно разбить длинную программу на составные части, как книгу разбивают на главы, при этом основная программа становится похожей на оглавление;
-   Сложные частные алгоритмы бывает полезно отладить отдельно в небольших тестирующих программах. Включить их в основную программу будет легко, если они оформлены в виде функций. Например, функций сортировок;
-   Сделанное хорошо в одной программе, хочется перенести в новые. Для повторного использования лучше сразу выделять в программе полезные алгоритмы в отдельные функции, а функции собирать в пакеты.

### Объявление функции

Итак, **функция – отдельная, функционально независимая часть программы, выполняющая определенную задачу.**

Функции объявляются с помощью ключевого слова `def` (от слова define – определять). За ключевым словом `def` следуют название функции, круглые скобки `()`, и двоеточие `:`.

```python
def название_функции():
    блок кода
```

![[Pasted image 20230427154235.png]]

Первая строка объявления функции называется **заголовком функции**.

Со следующей строки идет блок кода – **тело функции**. Это набор инструкций, составляющих одно целое и выполняющихся каждый раз, когда вызывается функция.

Для выделения строк блока кода отступом программисты Python обычно используют **четыре пробела**, в соответствии со стандартом PEP 8.

Рассмотрим объявление функции: 

```python
def print_message():
    print('Я - Артур,')
    print('король британцев. ')
```

Этот фрагмент кода определяет функцию с именем `print_message()`. Тело ее состоит из двух инструкций, и вызов приведет к их исполнению.

### Вызов функции

Для вызова функции пишут ее название и круглые скобки.

## Примечания

**Примечание 1.** Обратите внимание, что объявление пользовательской функции немного напоминает использование условного оператора `if` и циклов `for, while`.

**Примечание 4.** Иногда, при объявлении функции требуется сделать своего рода заглушку, чтобы функция ничего не выполняла. Тогда мы используем ключевое слово `pass`: 

```python
def do_nothing():
    pass
```

Мы объявили функцию с именем `do_nothing()`. Тело такой функции содержит единственную строку кода, которая ничего не делает.
В ходе исполнения оператора pass ничего не происходит, поэтому он может использоваться в качестве заглушки в тех местах, где это синтаксически необходимо, например, в инструкциях, где тело является обязательным, таких как def. Таким образом, оператор pass используется там, где код пока ещё не появился, но планируется.

**Примечание 5.** Функции часто называют **подпрограммами**.

# Функции с параметрами

```python
def название_функции(параметры):
    блок кода
```
![[Pasted image 20230427155836.png]]

## Еще примеры

```python
def draw_box(height, width):    # функция принимает два параметра
    for i in range(height):
        print('*' * width)
```

```python
draw_box(5, 7)
```

Результатом такого вызова функции `draw_box(5, 7)` будет:

```no-highlight
*******
*******
*******
*******
*******
```
--- 
```python
def print_hello(n):
    print('Hello' * n)
```

```python
print_hello(3)
print_hello(5)
times = 2
print_hello(times)
```

```no-highlight
HelloHelloHello
HelloHelloHelloHelloHello
HelloHello
```
--- 

```python
def print_text(txt, n):
    print(txt * n)
```

```no-highlight
print_text('Hello', 5)
print_text('A', 10)
```

```no-highlight
HelloHelloHelloHelloHello
AAAAAAAAAA
```

## Параметры VS аргументы

**Аргумент** – это любая порция данных, которая передается в функцию, когда функция вызывается. **Параметр** – это переменная, которая получает аргумент, переданный в функцию.

Для функции `draw_box(height, width)`:

```python
​def draw_box(height, width):
    for i in range(height):
        print('*' * width)
```

параметрами являются переменные `height` и `width`.

В момент вызова функции `draw_box(height, width)`:

```python
height = 10
draw_box(height, 9)
```

аргументами являются `height` и `9`.

Параметры функций часто называют **параметрическими переменными**.

## Внесение изменений в параметры

Когда аргумент передается в функцию, параметрическая переменная функции будет ссылаться на значение этого аргумента. Однако любые изменения, которые вносятся в параметрическую переменную, не будут влиять на аргумент.

Cледующий программный код:

```python
def draw_box(height, width):
    height = 2
    width = 10
    for i in range(height):
        print('*' * width)

n = 5
m = 7
draw_box(n, m)
print(n, m)
```

выведет:

```no-highlight
**********
**********
5 7
```

В теле функции вносятся изменения в значения параметрических переменных `height` и `width`, однако это никак не повлияло на значение переменных `n` и `m` из основной программы, которые передавались в качестве аргументов в функцию `draw_box()`.

## Примечание

**Примечание 1.** Функции в Python могут принимать сколько угодно параметров.

**Примечание 2.** Иногда вместо параметров и аргументов говорят о **формальных параметрах** и **фактических параметрах**. Формальные параметры – переменные, которые мы пишем при описании функции. Фактические параметры – то, что реально подставляется при вызове функции.

# Функция с возвратом значения

Когда функция с возвратом значения завершается, она возвращает значение в ту часть программы, которая ее вызвала. Возвращаемое из функции значение используется как любое другое: оно может быть присвоено переменной, выведено на экран, использовано в математическом выражении (если это число) и т. д.

Функция с возвратом значения возвращает значение обратно в ту часть программы, которая ее вызвала.

Мы уже сталкивались со многими функциями с возвратом значений:

-   функция `int()` – преобразует строку к целому числу и возвращает его;
-   функция `float()` – преобразует строку к вещественному числу и возвращает его;
-   функция `range()` – возвращает последовательность целых чисел `0, 1, 2, ...`;
-   функция `abs()` – возвращает абсолютное значение числа (модуль числа);
-   функция `len()` – возвращает длину строки или списка.

Функцию с возвратом значения пишут точно так же, как и без, но она должна иметь инструкцию `return`.

Вот общий формат определения функции с возвратом значения в Python:

```python
def название_функции():
    блок кода
    return выражение
```

Значение выражения, которое следует за ключевым словом `return`, будет отправлено в ту часть программы, которая вызвала функцию. Это может быть переменная либо выражение, к примеру, математическое.

Функция с возвратом значения имеет инструкцию `return`, возвращающую значение в ту часть программы,  которая ее вызвала.

При изучении вещественных чисел мы решали задачу о переводе градусов по шкале Фаренгейта в градусы по шкале Цельсия по формуле 

Напишем функцию, которая осуществляет перевод: 

```python
def convert_to_celsius(temp):
    result = (5 / 9) * (temp - 32)
    return result
```

Задача этой функции — принять одно число `temp` в качестве аргумента – количество градусов по шкале Фаренгейта, и вернуть другое — количество градусов по шкале Цельсия.

Рассмотрим ее работу. Первая инструкция в блоке функции присваивает значение `(5 / 9) * (temp - 32)` переменной `result`. Затем исполняется инструкция `return`, которая приводит к завершению исполнения функции и отправляет значение из переменной `result`, назад в ту часть программы, которая вызвала эту функцию.

```python
# функция перевода градусов Фаренгейта в градусы Цельсия
def convert_to_celsius(temp):
    result = (5 / 9) * (temp - 32)
    return result

# основная программа
temp = float(input('Bвeдитe количество градусов по Фаренгейту: '))
celsius = convert_to_celsius(temp)
print(celsius)  # градусы Цельсия
```

Основная программа получает от пользователя одно число – значение в градусах Фаренгейта, и вызывает функцию, передавая значение переменной `temp` в качестве аргумента. Значение, которое возвращается из функции `convert_to_celsius`, присваивается переменной `celsius`. 

![[Pasted image 20230430160528.png]]

![[Pasted image 20230430160535.png]]

## Использование инструкции return по максимуму

Взглянем еще раз на функцию `convert_to_celsius()`:

```python
def convert_to_celsius(temp):
    result = (5 / 9) * (temp - 32)
    return result
```

```python
def convert_to_celsius(temp):
    return (5 / 9) * (temp - 32)
```

## Использование нескольких return

В одной функции может быть сколько угодно инструкций `return`. Рассмотрим функцию `convert_grade()`, которая переводит стобалльную оценку в пятибалльную:

```python
def convert_grade(grade):
    if grade >= 90:
        return 5
    elif grade >= 80:
        return 4
    elif grade >= 70: 
        return 3
    elif grade >= 60:
        return 2
    else:
        return 1

# основная программа
grade = int(input('Введите вашу отметку по 100-балльной системе: '))
print(convert_grade(grade))
```

В функции `convert_grade()` используется 5 инструкций `return`. Каждая из них возвращает соответствующее значение и завершает работу функции.

Функцию `convert_grade()` можно переписать с помощью одной инструкции `return`:

```python
def convert_grade(grade):
    result = -1
    if grade >= 90:
        result = 5
    elif grade >= 80:
        result = 4
    elif grade >= 70: 
        result = 3
    elif grade >= 60:
        result = 2
    else:
        result = 1
    
    return result
```

## Функции с возвратом нескольких значений

```python
return выражение 1, выражение 2, выражение 3 ...
```

Следующий программный код определяет функцию `get_powers(num)`, которая принимает в качестве аргумента число `num` и возвращает его квадрат, куб и четвертую степень.

```python
def get_powers(num):
    return num**2, num**3, num**4
```

Результатом выполнения следующего кода:

```python
a, b, c = get_powers(2)
print(a)
print(b)
print(c)
```

будет:

```python
4
8
16
```

Возвращающие несколько значений функции – исключительная особенность языка Python. В большинстве языков программирования для возврата нескольких значений используется результирующий тип данных – список, который может содержать несколько значений.

![[Pasted image 20230501145057.png]]Программный код, решающий задачу, имеет вид:

```python
def solve(a, b, c, d, e, f):
    x = (d * e - b * f)/(a * d - b * c)
    y = (a * f - c * e)/(a * d - b * c)
    return x, y
```

Следующий код:

```python
xsol, ysol = solve(2, 3, 4, 1, 2, 5)
print('Решением системы являются числа', 'x =', xsol, 'y =', ysol)
```

выведет

```no-highlight
Решением системы являются числа x = 1.3 y = -0.2
```

![[Pasted image 20230501145110.png]]

# Возвращение булевых значений

Python позволяет писать [булевы функции](https://ru.wikipedia.org/wiki/%D0%91%D1%83%D0%BB%D0%B5%D0%B2%D0%B0_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F), возвращающие либо истину (True), либо ложь (False). Булеву функцию можно применять для проверки условия, тогда значения True и False будут сигнализировать о его выполнении.

Это можно сделать так:

```python
number = int(input())
if number % 2 == 0:
    print('Это число четное. ')
else:
    print('Это число нечетное.')
```

Этот фрагмент кода будет легче понять, если написать булеву функцию `is_even()`, которая принимает число в качестве аргумента и возвращает True, если оно четное, и False если нечетное.

```python
def is_even(number):
    if number % 2 == 0:
        return True
    else:
        return False
```

Теперь можно переписать инструкцию `if-else` основной программы так, чтобы она для определения четности переменной `number` вызывала функцию `is_even()`:

```python
number = int(input())
if is_even(number):
    print('Это число четное. ')
else:
    print('Это число нечетное.')
```

Так логику программы легче понять, а функцию можно вызывать в программе всякий раз, когда необходимо проверить четность числа.

## Использование булевых функций для валидации входных данных

Булевы функции можно также использовать для _**упрощения сложного кода валидации входных данных**_. Например в программе, предлагающей пользователю ввести номер модели изделия, где возможны только значения 100, 200 и 300, можем написать такой код:

```python
model = int(input())

while model != 100 and model != 200 and model != 300:
    print('Допустимыми номерами моделей являются 100, 200 и 300.')
    model = int(input())
```

Цикл валидации использует длинное составное булево выражение, и повторяется до тех пор, пока `model` не будет равняться 100 и 200 или 300. 

Вместе с тем, цикл валидации можно упростить, написав булеву функцию проверки переменной `model`, и вызывая ее в цикле. Напишем функцию `is_invalid()`, которая принимает один параметр `model` и возвращает значение `True`, если модель недопустима и `False` в противном случае. Тогда цикл валидации можно переписать следующим образом:

```python
while is_invalid(model):
    print('Допустимыми номерами моделей являются 100, 200 и 300.')
    model = int(input())
```

После этого изменения цикл становится легче читать. Теперь вполне очевидно, что цикл повторяется до тех пор, пока номер модели недопустим. Приведенный ниже фрагмент кода показывает, как можно было бы написать функцию `is_invalid()`. Она принимает номер модели в качестве аргумента, и если аргумент не равен 100, 200 и 300, то эта функция возвращает `True`, говоря, что он недопустимый. В противном случае функция возвращает `False`.

```python
def is_invalid(model):
    if model != 100 and model != 200 and model != 300:
        return True
    else:
        return False
```


Создание функций, реализующих такую простую логику — не всегда оптимальное решение, так как увеличивает размер кода и ведет к затратам времени на вызов функции и возврат обратно результата, что может сказаться на производительности программы.

# Решение задач

**Задача 1.** Напишите функцию, которая возвращает длину гипотенузы прямоугольного треугольника по известным значениям его катетов.

**Решение.** Для нахождения длины гипотенузы, нам нужно применить теорему Пифагора: квадрат гипотенузы прямоугольного треугольника, равен сумме квадратов его катетов. Другими словами, если a,ba,b – длины катетов, а cc – длина гипотенузы, то имеет место равенство: 
![[Pasted image 20230430160921.png]]
Функция, вычисляющая длину гипотенузы, может иметь вид:

```python
def compute_hypotenuse(a, b):
    c = (a ** 2 + b ** 2) ** 0.5
    return c
```

 
 Для извлечения квадратного корня мы использовали оператор возведения в степень. Напомним, что результатом обоих выражений: `math.sqrt(c)` и `c ** 0.5` является одно число c

Следующий программный код:

```python
print(compute_hypotenuse(3, 4))
print(compute_hypotenuse(5, 12))
print(compute_hypotenuse(1, 1))
```

выведет:

```no-highlight
5.0                   # длина гипотенузы треугольника с катетами 3 и 4
13.0                  # длина гипотенузы треугольника с катетами 5 и 12
1.4142135623730951    # длина гипотенузы треугольника с катетами 1 и 1
```

Если нужно передать программе числа, считанные с клавиатуры, то мы пишем следующий код:

```python
x = int(input())
y = int(input())

hypotenuse = compute_hypotenuse(x, y)

print(hypotenuse)
```

В модуле `math` имеется встроенная функция `hypot(x, у)` которая возвращает длину гипотенузы прямоугольного треугольника с катетами `x` и `y`.

Одним из основных преимуществ функций является возможность их повторного использования для решения похожих задач. Рассмотрим задачу нахождения расстояния между двумя точками.

![[Pasted image 20230430161141.png]]
![[Pasted image 20230430160958.png]]

Несложно заметить, что искомое расстояние – это длина гипотенузы прямоугольного треугольника с катетами равными ∣x1−x2∣ и ∣y1−y2∣

Функция, вычисляющая расстояние между точками, может иметь вид:

```python
def get_distance(x1, y1, x2, y2):
    return compute_hypotenuse(x1 - x2, y1 - y2)
```

Для подсчета искомого расстояния мы используем уже созданную нами функцию `compute_hypotenuse` передавая ей в качестве аргументов числа `x1 - x2` и `y1 - y2`.

Основная программа имеет вид:

```python
x1, y1 = float(input()), float(input())  # считываем координаты первой точки
x2, y2 = float(input()), float(input())  # считываем координаты второй точки

print(get_distance(x1, y1, x2, y2))      # вычисляем и выводим расстояние между точками
```

**Задача 3.** Напишите функцию `sum_digits(n)`, принимающую в качестве аргумента натуральное число и возвращающую сумму его цифр.

**Решение.** Функция `sum_digits(n)` может иметь вид:

```python
def sum_digits(n):
    result = 0
    while n > 0:
        result += n % 10
        n //= 10
    return result
```

Основная программа имеет вид:

```python
n = int(input())
print(sum_digits(n))      # вычисляем и выводим сумму цифр считанного числа
```

**Задача 4.** Напишите функцию `compute_average(numbers)`, принимающую в качестве аргумента список чисел и возвращающую среднее значение элементов списка.

**Решение.** Для подсчета среднего значения элементов списка нужно вычислить сумму всех элементов и их количество, то есть использовать функции `sum()` и `len()`. Функция `compute_average(numbers)` может иметь вид:

```python
def compute_average(numbers):
    return sum(numbers) / len(numbers)
```

Основная программа имеет вид:

```python
numbers = [1, 3, 5, 1, 6, 8, 10, 2]
print(compute_average(numbers))      # вычисляем и выводим среднее значение элементов списка
```

Результатом работы такой программы будет число `4.5`, которое и является средним значением.